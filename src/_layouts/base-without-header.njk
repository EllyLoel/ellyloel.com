<!DOCTYPE html>
<html lang="{{ metadata.lang }}">
	<!-- specify language: http://www.w3.org/TR/html401/struct/dirlang.html#h-8.1 -->
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<!-- specify viewport: https://developers.google.com/speed/docs/insights/ConfigureViewport -->
		<title>{{ title }} | Elly Loel</title>

		<!-- Include stylesheets here. Concatenate & minify for performance: https://developers.google.com/speed/docs/insights/MinifyResources -->
		<link rel="stylesheet" href="/assets/css/style.css">

		<script>
			const localStorageColorScheme = localStorage.getItem("color-scheme");
			const body = document.documentElement;
			// if there's a color-scheme id in localstorage, use it, if not use auto.
			body.setAttribute("color-scheme", localStorageColorScheme || "auto");
			body.setAttribute(
				"class", localStorageColorScheme
				?.includes("light")
					? "sl-theme-light"
					: localStorageColorScheme
						?.includes("dark")
							? "sl-theme-dark"
							: window.matchMedia("(prefers-color-scheme: light)").matches
								? "sl-theme-light"
								: "sl-theme-dark");
		</script>

		<!-- Include scripts here. Concatenate & minify for performance: https://developers.google.com/speed/docs/insights/MinifyResources -->
		<script type="module" src="/assets/js/main.js" defer></script>
		{%- if page.url === "/" -%}
			<script type="module" src="/assets/js/model-viewer.js" defer></script>
			<script type="module" src="/assets/js/spotify.js" defer></script>
		{%- endif -%}
		{%- if page.url === "/garden/" or page.url === "/blog/" or page.url === "/projects/" or page.url === "/bookmarks/" or page.url === "/til/" or page.url === "/til/d3/" -%}
			<script type="module" src="/assets/js/graph.js" defer></script>
		{%- endif -%}

		{%- include "meta.njk" -%}
	</head>
	<body>
		<a class="[ skip-link ] [ button ]" href="#content">Skip to content</a>

		{%- include "header.njk" -%}

		<!-- tabindex fixes focus issue: https://benmyers.dev/blog/skip-links/#tldr -->
		<main id="content" tabindex="-1" class="[ wrapper flow ]" style="--wrapper-size: 100ch;">
			{{ content | safe }}
		</main>

		{%- include "footer.njk" -%}
	</body>
</html>
